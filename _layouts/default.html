<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
Â 
<title>{{ page.title }}</title>
<link rel="shortcut icon" type="image/x-icon" href="{{ '/Images/icon/favicon.ico' | relative_url }}">
<link rel="icon" type="image/png" sizes="32x32" href="{{ '/Images/icon/favicon-32x32.png' | relative_url }}">
<link rel="icon" type="image/png" sizes="16x16" href="{{ '/Images/icon/favicon-16x16.png' | relative_url }}">
<link rel="apple-touch-icon" sizes="180x180" href="{{ '/Images/icon/apple-touch-icon.png' | relative_url }}">
<link rel="manifest" href="{{ '/Images/icon/site.webmanifest' | relative_url }}">
Â 
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono&display=swap" rel="stylesheet">
Â 
<style>
Â  /* --- 0. å…¨å±€è®¾ç½® --- */
Â  html { scroll-behavior: smooth; } /* å¢åŠ å¹³æ»‘æ»šåŠ¨åŸºç¡€å±æ€§ */
Â  .github-only { display: none !important; }
Â  .lang-zh { display: none; animation: fadeIn 0.5s ease; }
Â  .lang-en { display: block; animation: fadeIn 0.5s ease; }
Â  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
Â  Â 
Â  body {Â 
Â  Â  margin: 0; padding: 0; color: #e0e7ff;Â 
Â  Â  font-family: 'Inter', -apple-system, sans-serif;Â 
Â  Â  line-height: 1.6; overflow-x: hidden;Â 
Â  Â  cursor: none;Â 
Â  Â  scrollbar-width: thin; scrollbar-color: #3b82f6 transparent;
Â  Â  transition: color 0.5s ease;
Â  Â  background-color: #0a0a0f;Â 
Â  }
Â  @media (pointer: coarse) { body { cursor: auto; } }
Â 
Â  /* âš¡ï¸ CSS æ€§èƒ½ä¼˜åŒ–ï¼šé˜²æ­¢å›¾ç‰‡åŠ è½½æ—¶å¸ƒå±€æŠ–åŠ¨ */
Â  img, video, iframe {Â 
Â  Â  Â  max-width: 100% !important;Â 
Â  Â  Â  height: auto !important;Â 
Â  Â  Â  box-sizing: border-box;Â 
Â  Â  Â  content-visibility: auto; /* æµè§ˆå™¨æ¸²æŸ“ä¼˜åŒ– */
Â  Â  Â  /* é»˜è®¤è®©å›¾ç‰‡å…ˆç¨å¾®é€æ˜ï¼ŒåŠ è½½å¥½å JS æ§åˆ¶æ˜¾ç¤ºï¼Œä½“éªŒæ›´ä¸æ»‘ */
Â  Â  Â  transition: opacity 0.5s ease;
Â  }
Â 
Â  ::-webkit-scrollbar { width: 6px; }
Â  ::-webkit-scrollbar-track { background: transparent; }
Â  ::-webkit-scrollbar-thumb { background: rgba(59, 130, 246, 0.5); border-radius: 10px; }
Â  ::-webkit-scrollbar-thumb:hover { background: rgba(59, 130, 246, 0.8); }
Â  ::selection { background: #3b82f6; color: #ffffff; text-shadow: 0 0 8px rgba(255, 255, 255, 0.8); }
Â 
Â  /* --- 1. å…‰æ ‡ & è¿›åº¦æ¡ --- */
Â  .cursor-dot, .cursor-outline {
Â  Â  position: fixed; top: 0; left: 0;Â 
Â  Â  transform: translate(-50%, -50%); border-radius: 50%; z-index: 99999; pointer-events: none;
Â  Â  transition: opacity 0.2s ease, width 0.2s, height 0.2s, background-color 0.2s;
Â  Â  will-change: left, top, transform; /* æ€§èƒ½ä¼˜åŒ–ï¼šGPUåŠ é€Ÿ */
Â  }
Â  .cursor-dot { width: 8px; height: 8px; background-color: #3b82f6; }
Â  .cursor-outline { width: 40px; height: 40px; border: 1px solid rgba(59, 130, 246, 0.5); }
Â  body.hovering .cursor-outline { width: 60px; height: 60px; background-color: rgba(59, 130, 246, 0.1); border-color: transparent; }
Â  #progress-bar { position: fixed; top: 0; left: 0; height: 3px; background: linear-gradient(90deg, #3b82f6, #60a5fa); width: 0%; z-index: 99999; transition: width 0.1s; will-change: width; }
Â 
Â  /* --- 2. èƒŒæ™¯ --- */
Â  #vanta-bg { position: fixed; z-index: -5; top: 0; left: 0; width: 100%; height: 100%; background: #0a0a0f; }
Â  #vanta-bg::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, transparent 0%, rgba(10, 10, 15, 0.4) 100%); pointer-events: none; transition: background 0.5s ease; }
Â 
Â  #meteor-canvas {
Â  Â  Â  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
Â  Â  Â  z-index: -4; pointer-events: none;Â 
Â  }
Â  Â 
Â  /* --- 3. å¸ƒå±€ --- */
Â  .layout-wrapper { position: relative; max-width: 860px; margin: 100px auto 60px; z-index: 10; perspective: 1000px; }
Â 
Â  /* --- 4. æœºå™¨äººæ ¸å¿ƒ --- */
Â  #bot-container {Â 
Â  Â  position: absolute; top: 70px; left: 50%;Â 
Â  Â  transform: translateX(-50%); width: 120px; height: 70px;Â 
Â  Â  z-index: 9999; cursor: pointer;Â 
Â  Â  opacity: 1;Â 
Â  Â  transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);Â 
Â  Â  will-change: transform, top, left, bottom, right; /* æ€§èƒ½ä¼˜åŒ– */
Â  }
Â  #bot-container.fixed-mode { position: fixed !important; top: auto !important; left: auto !important; bottom: 30px !important; right: 30px !important; transform: scale(0.9) !important; opacity: 1 !important; }
Â Â 
Â  /* --- ğŸ”¥ æœºå™¨äººå¼•å¯¼æ¨¡å¼ (æŒ‡å¼•æ’­æ”¾) --- */
Â  .guide-arrow {
Â  Â  position: absolute;
Â  Â  left: -50px; top: 50%;
Â  Â  transform: translateY(-50%);
Â  Â  font-size: 40px;
Â  Â  color: #ef4444; opacity: 0; pointer-events: none;
Â  Â  text-shadow: 0 0 10px rgba(239, 68, 68, 0.8);
Â  Â  transition: opacity 0.3s;
Â  Â  z-index: 100; font-weight: bold;
Â  }
Â  #bot-container.guide-mode {
Â  Â  position: fixed !important; top: 50% !important; right: 15% !important; left: auto !important; bottom: auto !important;
Â  Â  transform: translate(0, -50%) scale(1.2) !important; z-index: 100006 !important;
Â  }
Â  #bot-container.guide-mode .guide-arrow { opacity: 1; animation: point-left 0.8s ease-in-out infinite alternate; }
Â  @keyframes point-left { from { transform: translateY(-50%) translateX(0); } to { transform: translateY(-50%) translateX(-15px); } }
Â  #bot-container.attention-jump { animation: attention-bounce 0.6s ease infinite alternate; }
Â  @keyframes attention-bounce { 0% { transform: translateX(-50%) translateY(0) scale(1); } 100% { transform: translateX(-50%) translateY(-15px) scale(1.1); } }
Â  #bot-container.fixed-mode.attention-jump { animation: attention-bounce-fixed 0.6s ease infinite alternate; }
Â  @keyframes attention-bounce-fixed { 0% { transform: scale(0.9) translateY(0); } 100% { transform: scale(0.9) translateY(-15px); } }
Â 
Â  .pulse-ring { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100px; height: 100px; border-radius: 50%; border: 2px solid rgba(168, 85, 247, 0.5); opacity: 0; z-index: -1; pointer-events: none; animation: pulse-ring-anim 6s infinite cubic-bezier(0.4, 0, 0.6, 1); transition: opacity 0.5s; }
Â  #bot-container.speaking .pulse-ring { animation-duration: 1.5s; border-color: rgba(59, 130, 246, 0.8); }
Â  #bot-container.interaction-done .pulse-ring { opacity: 0 !important; animation: none !important; }
Â  @keyframes pulse-ring-anim { 0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; } 30% { opacity: 0.6; } 100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; } }
Â 
Â  .bot-head { width: 100px; height: 50px; background: #ffffff; border: 2px solid #e0e7ff; border-bottom: none; border-radius: 50px 50px 20px 20px; margin: 0 auto; position: relative; box-shadow: 0 -5px 15px rgba(59, 130, 246, 0.15); display: flex; justify-content: center; align-items: center; gap: 10px; padding-top: 5px; animation: float-bot 3s ease-in-out infinite; }
Â  .bot-eye { width: 28px; height: 28px; background: #bfdbfe; border-radius: 50%; border: 1px solid #93c5fd; position: relative; overflow: hidden; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
Â  .bot-pupil { width: 14px; height: 14px; background: #1e3a8a; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); transition: opacity 0.2s; }
Â  .bot-lid { position: absolute; top: 0; left: 0; width: 100%; height: 0%; background: #ffffff; z-index: 10; animation: blink 4s infinite; }
Â  #bot-container.speaking .bot-eye { background: transparent; border: none; box-shadow: none; width: 22px; height: 12px; border-top: 3px solid #3b82f6; border-radius: 22px 22px 0 0; margin-top: 8px; }
Â  #bot-container.speaking .bot-pupil, #bot-container.speaking .bot-lid { opacity: 0; }
Â  .bot-mouth { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; background: #3b82f6; border-radius: 4px; opacity: 0; transition: all 0.2s; }
Â  #bot-container.speaking .bot-mouth { opacity: 1; width: 14px; background: transparent; border: 2px solid #3b82f6; animation: mouth-talk 0.25s infinite alternate; }
Â  .bot-antenna { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); width: 2px; height: 25px; background: #e0e7ff; }
Â  .bot-antenna::after { content: ''; position: absolute; top: -6px; left: -3px; width: 8px; height: 8px; border-radius: 50%; animation: pulse-antenna-breath 2s infinite ease-in-out; }
Â  #bot-speech { position: absolute; top: -45px; left: 50%; transform: translateX(-50%) scale(0); transform-origin: bottom center; background: rgba(30, 41, 59, 0.95); color: #fff; padding: 6px 14px; border-radius: 12px; font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; white-space: nowrap; pointer-events: none; border: 1px solid rgba(59, 130, 246, 0.4); box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s; z-index: 10000; opacity: 0; }
Â  #bot-speech::after { content: ''; position: absolute; bottom: -5px; left: 50%; width: 8px; height: 8px; background: inherit; transform: translateX(-50%) rotate(45deg); border-right: 1px solid rgba(59, 130, 246, 0.4); border-bottom: 1px solid rgba(59, 130, 246, 0.4); }
Â  #bot-container.speaking #bot-speech { transform: translateX(-50%) scale(1); opacity: 1; }
Â 
Â  #rpg-dialogue { position: absolute; top: 65px; left: 50%; transform: translateX(-50%) translateY(20px); width: 600px; max-width: 90vw; background: rgba(15, 23, 42, 0.95); border: 1px solid #3b82f6; border-radius: 12px; padding: 15px; box-shadow: 0 10px 40px rgba(0,0,0,0.6), 0 0 15px rgba(59, 130, 246, 0.2); z-index: 20000; opacity: 0; pointer-events: none; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); display: flex; flex-direction: column; gap: 10px; font-family: 'JetBrains Mono', monospace; }
Â  #rpg-dialogue.active { opacity: 1; transform: translateX(-50%) translateY(0); pointer-events: auto; }
Â  #bot-container.fixed-mode #rpg-dialogue { top: auto; bottom: 80px; left: auto; right: 0; transform: translateY(20px); }
Â  #bot-container.fixed-mode #rpg-dialogue.active { transform: translateY(0); }
Â  #rpg-text { color: #bfdbfe; font-size: 0.9rem; min-height: 40px; line-height: 1.5; }
Â  #rpg-cursor { display: inline-block; width: 8px; height: 14px; background: #3b82f6; vertical-align: middle; animation: blink 1s infinite; }
Â  #rpg-options { display: flex; flex-direction: column; gap: 8px; margin-top: 5px; }
Â  .rpg-btn { background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); color: #93c5fd; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8rem; text-align: left; transition: all 0.2s; opacity: 0; transform: translateX(-10px); animation: slideIn 0.3s forwards; }
Â  .rpg-btn:hover { background: rgba(59, 130, 246, 0.25); border-color: #60a5fa; color: #fff; transform: translateX(2px); }
Â  @keyframes slideIn { to { opacity: 1; transform: translateX(0); } }
Â  .rpg-close { position: absolute; top: 5px; right: 8px; font-size: 18px; color: #475569; cursor: pointer; }
Â  .rpg-close:hover { color: #fff; }
Â 
Â  /* --- å†…å®¹å®¹å™¨ --- */
Â  .container { position: relative; padding: 60px 80px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%); border-radius: 20px; box-shadow: 0 20px 50px rgba(59, 130, 246, 0.15); border: 1px solid rgba(255, 255, 255, 0.1); border-top: 4px solid #3b82f6; opacity: 0; animation: fadeUp 0.8s ease-out 0.3s forwards; z-index: 1; transform-style: preserve-3d; transition: transform 0.1s ease-out; overflow: hidden; will-change: transform; /* æ€§èƒ½ä¼˜åŒ– */ }
Â  .container::before { content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(800px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255, 255, 255, 0.07), transparent 40%); z-index: -1; pointer-events: none; opacity: 0; transition: opacity 0.5s; }
Â  .container:hover::before { opacity: 1; }
Â  #main_content table { width: 100% !important; border-collapse: collapse; margin: 20px 0; background: rgba(10, 10, 15, 0.3); border-radius: 8px; overflow: hidden; }
Â  #main_content th, #main_content td { padding: 12px; border: 1px solid rgba(255, 255, 255, 0.1); }
Â  #main_content tr { background: rgba(30, 41, 59, 0.8) !important; }Â  Â Â 
Â  #main_content th { color: #60a5fa; font-weight: 600; }
Â  .typewriter-container { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; color: #93c5fd; min-height: 1.6em; margin-bottom: 2rem; }
Â  .typewriter-cursor { animation: blink-cursor 0.8s infinite; border-left: 3px solid #3b82f6; margin-left: 2px; }
Â  .nav-badges { margin: 2rem 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
Â  .nav-badges a { opacity: 0; animation: fadeUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; position: relative; z-index: 2; }
Â  .nav-badges img { height: 28px !important; width: auto; border-radius: 50px; box-shadow: 0 2px 6px rgba(59, 130, 246, 0.15); border: 1.5px solid white; transition: all 0.3s; mix-blend-mode: normal !important; }
Â  .nav-badges a:hover img { animation: float-hover 2s ease-in-out infinite; box-shadow: 0 8px 20px rgba(59, 130, 246, 0.35); transform: scale(1.1); }
Â  .nav-badges img.rippling { animation: ripple-wave 0.5s forwards; }
Â  Â  Â  Â Â 
Â  /* --- æŒ‰é’® & æ¨¡å¼ --- */
Â  .controls-container { position: fixed; top: 20px; right: 20px; display: flex; gap: 15px; z-index: 10000; }
Â  .ctrl-btn { width: 40px; height: 40px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; backdrop-filter: blur(10px); transition: all 0.3s ease; font-size: 1.2rem; user-select: none; }
Â  .ctrl-btn:hover { background: rgba(255, 255, 255, 0.2); transform: scale(1.1); }
Â  #lang-toggle { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; font-weight: bold; width: auto; padding: 0 10px; border-radius: 20px; }
Â 
Â  /* --- â˜ï¸ æŠ¤çœ¼æŸ”å…‰æ¨¡å¼ --- */
Â  body.light-mode { color: #334155; background-color: #ffffff; }
Â  body.light-mode #vanta-bg::after { background: radial-gradient(circle at center, rgba(241, 245, 249, 0.7) 0%, #f1f5f9 100%); }
Â  body.light-mode .container { background: rgba(241, 245, 249, 0.9); border-color: rgba(203, 213, 225, 0.6); box-shadow: 0 20px 50px rgba(148, 163, 184, 0.15); backdrop-filter: blur(25px); }
Â  body.light-mode #rpg-dialogue { background: #ffffff; border-color: #cbd5e1; box-shadow: 0 10px 30px rgba(148, 163, 184, 0.1); }
Â  body.light-mode #rpg-text { color: #334155; }
Â  body.light-mode .rpg-btn { background: rgba(226, 232, 240, 0.6); color: #475569; border-color: rgba(203, 213, 225, 0.8); }
Â  body.light-mode .rpg-btn:hover { background: #cbd5e1; color: #1e40af; border-color: #94a3b8; }
Â  body.light-mode #bot-speech { background: #ffffff; color: #334155; border-color: #cbd5e1; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
Â  body.light-mode .typewriter-container { color: #2563eb; }
Â  body.light-mode #main_content table { background: #f8fafc;Â  Â box-shadow: none; }
Â  body.light-mode #main_content th { color: #1e293b; background: #e2e8f0 !important; border-color: cbd5e1; }
Â  body.light-mode #main_content td { border-color: #e2e8f0; color: #334155; }Â 
Â  body.light-mode #main_content tr { background: transparent !important; }
Â  body.light-mode #main_content tr:hover { background: rgba(0, 0, 0, 0.03) !important;}
Â  body.light-mode .rpg-close { color: #94a3b8; }
Â  body.light-mode .rpg-close:hover { color: #ef4444; }
Â  body.light-mode .ctrl-btn { background: rgba(255, 255, 255, 0.5); border-color: #cbd5e1; color: #64748b; }
Â  body.light-mode .ctrl-btn:hover { background: #ffffff; color: #0f172a; transform: scale(1.05); }
Â  body.light-mode .img-caption { color: #2563eb; }
Â 
Â  @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
Â  @keyframes float-bot { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
Â  @keyframes blink { 0%, 48%, 52%, 100% { height: 0%; } 50% { height: 100%; } }
Â  @keyframes botEnter { from { opacity: 0; transform: translateX(-50%) translateY(20px); } to { opacity: 1; transform: translateX(-50%) translateY(0); } }
Â  @keyframes blink-cursor { from, to { opacity: 1; } 50% { opacity: 0; } }
Â  @keyframes pulse-antenna-breath { 0%, 100% { background: #3b82f6; box-shadow: 0 0 5px #3b82f6; } 50% { background: #93c5fd; box-shadow: 0 0 15px #60a5fa, 0 0 8px #ffffff; } }
Â  @keyframes mouth-talk { 0% { height: 2px; } 100% { height: 8px; border-radius: 50%; } }
Â  Â 
Â  .welcome-modal {
Â  Â  position: fixed; inset: 0;Â 
Â  Â  background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px);
Â  Â  z-index: 100001;Â 
Â  Â  display: flex; justify-content: center; align-items: center;
Â  Â  opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
Â  Â  padding: 20px;
Â  Â  cursor: default !important;
Â  }
Â  .welcome-modal * { cursor: default !important; }
Â  .welcome-modal .btn-primary, .welcome-modal .btn-secondary, .welcome-modal .slider { cursor: pointer !important; }
Â  .welcome-modal.show { opacity: 1; pointer-events: auto; }
Â  Â 
Â  .welcome-modal:hover ~ .cursor-dot, .welcome-modal:hover ~ .cursor-outline { opacity: 0 !important; }
Â  Â 
Â  .modal-content {
Â  Â  background: rgba(30, 41, 59, 0.85);Â 
Â  Â  border: 1px solid rgba(255, 255, 255, 0.1);
Â  Â  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
Â  Â  backdrop-filter: blur(20px);
Â  Â  padding: 30px; border-radius: 20px;Â 
Â  Â  width: 90%; max-width: 400px; text-align: center;
Â  Â  margin: auto;Â 
Â  Â  max-height: 90vh; overflow-y: auto;Â 
Â  Â  transform: scale(0.9); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
Â  Â  position: relative;Â 
Â  Â  padding-bottom: 140px;Â 
Â  }
Â  .welcome-modal.show .modal-content { transform: scale(1); }
Â  Â 
Â  .modal-title { font-size: 1.5rem; margin-bottom: 15px; color: #fff; font-weight: 600; }
Â  .modal-body { font-size: 1rem; color: #cbd5e1; margin-bottom: 25px; line-height: 1.6; }
Â  .m-zh { display: none; }
Â 
Â  .modal-btns { display: flex; flex-direction: column; gap: 10px; }
Â  .btn-primary, .btn-secondary {
Â  Â  padding: 12px 20px; border-radius: 10px; font-weight: 600; transition: all 0.2s;
Â  Â  border: none; font-family: inherit;
Â  }
Â  .btn-primary { background: #3b82f6; color: white; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4); }
Â  .btn-primary:hover { background: #2563eb; transform: translateY(-2px); }
Â  .btn-secondary { background: rgba(255, 255, 255, 0.1); color: #e2e8f0; }
Â  .btn-secondary:hover { background: rgba(255, 255, 255, 0.2); }
Â 
Â  .modal-lang-switch-container {
Â  Â  position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%);Â 
Â  Â  display: flex; flex-direction: column; align-items: center; gap: 4px; width: 100%;Â 
Â  }
Â  .lang-title { font-size: 0.7rem; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }
Â  .lang-row { display: flex; align-items: center; gap: 8px; justify-content: center; font-size: 0.85rem; color: #cbd5e1; font-family: 'JetBrains Mono', monospace; }
Â  .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
Â  .switch input { opacity: 0; width: 0; height: 0; }
Â  .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #475569; transition: .4s; border-radius: 20px; }
Â  .slider:before { position: absolute; content: ""; height: 16px; width: 16px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; }
Â  input:checked + .slider { background-color: #3b82f6; }
Â  input:focus + .slider { box-shadow: 0 0 1px #3b82f6; }
Â  input:checked + .slider:before { transform: translateX(20px); }
Â 
Â  .modal-watermark {
Â  Â  position: absolute; bottom: 20px; left: 0; width: 100%;Â 
Â  Â  text-align: center; font-size: 0.65rem; color: #94a3b8; font-family: 'JetBrains Mono', monospace; pointer-events: none; opacity: 0.6;Â 
Â  }

Â  /* --- ğŸ¬ è§†é¢‘å¼¹çª—æ ·å¼ --- */
Â  .video-modal {
Â  Â  position: fixed; inset: 0;
Â  Â  background: rgba(0, 0, 0, 0.9);
Â  Â  z-index: 100005;
Â  Â  display: flex; justify-content: center; align-items: center;
Â  Â  opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
Â  Â  backdrop-filter: blur(10px);
Â  }
Â  .video-modal.show { opacity: 1; pointer-events: auto; }

Â  .video-content {
Â  Â  width: 90%; max-width: 800px;
Â  Â  background: rgba(15, 23, 42, 1);
Â  Â  border: 1px solid #3b82f6;
Â  Â  border-radius: 12px;
Â  Â  box-shadow: 0 0 50px rgba(59, 130, 246, 0.3);
Â  Â  overflow: hidden;
Â  Â  transform: scale(0.9); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
Â  }
Â  .video-modal.show .video-content { transform: scale(1); }

Â  .video-header {
Â  Â  display: flex; justify-content: space-between; align-items: center;
Â  Â  padding: 10px 20px;
Â  Â  background: rgba(59, 130, 246, 0.1);
Â  Â  border-bottom: 1px solid rgba(59, 130, 246, 0.3);
Â  Â  color: #93c5fd; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;
Â  }
Â  .video-close {
Â  Â  cursor: pointer; font-size: 1.5rem; line-height: 1; color: #64748b; transition: color 0.2s;
Â  }
Â  .video-close:hover { color: #ef4444; }

Â  video#guardian-video {
Â  Â  width: 100%; display: block; outline: none;
Â  }
Â 
Â  @media (max-width: 768px) {Â 
Â  Â  #bot-speech {
Â  Â  Â  white-space: normal !important; max-width: 200px !important; width: max-content !important; height: auto !important; line-height: 1.5;
Â  Â  Â  left: auto !important; right: 0 !important; top: -55px !important; border-radius: 12px 12px 0 12px !important;Â 
Â  Â  Â  transform: translateX(0) scale(0) !important; transform-origin: bottom right !important;Â 
Â  Â  }
Â  Â  #bot-container.speaking #bot-speech { transform: translateX(0) scale(1) !important; }
Â  Â  .cursor-dot, .cursor-outline { display: none; }Â 
Â  Â  .layout-wrapper { margin-top: 40px !important; }
Â  Â  .controls-container { top: 15px; right: 15px; gap: 8px; }
Â  Â  .ctrl-btn { width: 35px; height: 35px; font-size: 1rem; }
Â  Â  #lang-toggle { font-size: 0.7rem; padding: 0 8px; }
Â  Â  #bot-container {Â 
Â  Â  Â  display: block !important; position: fixed !important; top: auto !important; left: auto !important;
Â  Â  Â  right: 20px !important; bottom: 30px !important; transform: scale(0.85) translateX(0) !important;
Â  Â  Â  opacity: 1 !important; animation: none !important;
Â  Â  }
Â  Â  #bot-container #rpg-dialogue {
Â  Â  Â  position: fixed !important; top: auto !important; bottom: 100px !important; left: 10px !important; right: 10px !important;
Â  Â  Â  width: auto !important; max-width: none !important; transform: translateY(10px) !important;
Â  Â  }
Â  Â  #bot-container #rpg-dialogue.active { transform: translateY(0) !important; }
Â  Â  .container { padding: 30px 20px; }Â 
Â  Â  #main_content { overflow-x: auto; }
Â  Â  .modal-content { padding-bottom: 140px; }Â 

Â  Â  #bot-container.guide-mode {
Â  Â  Â  top: auto !important; bottom: 20% !important; left: 50% !important; right: auto !important;
Â  Â  Â  transform: translateX(-50%) scale(1) !important;
Â  Â  }
Â  Â  .guide-arrow { left: 50%; top: -40px; transform: translateX(-50%) rotate(90deg); }
Â  Â  #bot-container.guide-mode .guide-arrow { animation: point-up 0.8s ease-in-out infinite alternate; }
Â  Â  @keyframes point-up {
Â  Â  Â  from { transform: translateX(-50%) rotate(-90deg) translateY(0); }
Â  Â  Â  to { transform: translateX(-50%) rotate(-90deg) translateY(-15px); }
Â  Â  }
Â  }
</style>

Â <script type="module"
Â  src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
</script>
Â 
</head>
Â 
<body>
<div id="video-modal" class="video-modal">
Â  <div class="video-content">
Â  Â  <div class="video-header">
Â  Â  Â  <span>ğŸ“½ï¸ DEMO REVIEW PROTOCOL</span>
Â  Â  Â  <span class="video-close" onclick="closeVideoModal()">Ã—</span>
Â  Â  </div>
Â  Â  <video id="guardian-video" controls playsinline>
Â  Â  Â  <source src="https://github.com/user-attachments/assets/3d1f7740-a5a1-44a2-a549-0b52da2e9e2e" type="video/mp4">
Â  Â  Â  Your browser does not support the video tag.
Â  Â  </video>
Â  </div>
</div>

<div id="welcome-modal" class="welcome-modal">
Â  <div class="modal-content">
Â  Â  <div class="modal-title">
Â  Â  Â  <span class="m-en">âœ¨ Hi, Welcome to E-Link!</span>
Â  Â  Â  <span class="m-zh">âœ¨ å—¨ï¼æ¬¢è¿è®¿é—®E-Linkï¼</span>
Â  Â  </div>
Â  Â  <div class="modal-body">
Â  Â  Â  <span class="m-en">
Â  Â  Â  Â We recommend <b>Dark Mode</b> for a more immersive experience<br>
Â  Â  Â  Â <span style="font-size: 0.85rem; color: #94a3b8;">
Â  Â  Â  Â  Â (Feel free to tailor your view at the top-right corner)
Â  Â  Â  Â </span>
Â  Â  Â  </span>
Â  Â  Â  <span class="m-zh">
Â  Â  Â  Â ä¸ºå‘ˆç°æœ€ä½³<b>è§†è§‰ä½“éªŒ</b>ï¼Œå»ºè®®ä¿ç•™<b>æ·±è‰²è®¾ç½®</b> <br>
Â  Â  Â  Â <span style="font-size: 0.85rem; color: #94a3b8;">
Â  Â  Â  Â  Â (æ‚¨å¯éšæ—¶é€šè¿‡å³ä¸Šè§’åˆ‡æ¢è¯­è¨€æˆ–ä¸»é¢˜)
Â  Â  Â  Â </span>
Â  Â  Â  </span>
Â  Â  </div>
Â  Â  <div class="modal-btns">
Â  Â  Â  <button id="modal-keep-dark-btn" class="btn-primary">
Â  Â  Â  Â  <span class="m-en">ğŸŒ™ Keep Dark Mode</span>
Â  Â  Â  Â  <span class="m-zh">ğŸŒ™ ä¿æŒæ·±è‰² (æ¨è)</span>
Â  Â  Â  </button>
Â  Â  Â  <button id="modal-switch-light-btn" class="btn-secondary">
Â  Â  Â  Â  <span class="m-en">ğŸ”† Switch to Light Mode</span>
Â  Â  Â  Â  <span class="m-zh">ğŸ”† åˆ‡æ¢åˆ°æµ…è‰²</span>
Â  Â  Â  </button>
Â  Â  </div>
Â  Â  <div class="modal-lang-switch-container">
Â  Â  Â  <span class="lang-title">Language / è¯­è¨€</span>
Â  Â  Â  <div class="lang-row">
Â  Â  Â  Â  <span>English</span>
Â  Â  Â  Â  <label class="switch">
Â  Â  Â  Â  Â  <input type="checkbox" id="modal-lang-toggle-checkbox">
Â  Â  Â  Â  Â  <span class="slider round"></span>
Â  Â  Â  Â  </label>
Â  Â  Â  Â  <span>ç®€ä½“ä¸­æ–‡</span>
Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div class="modal-watermark">
Â  Â  Â  <span class="m-en">Webpage Designed by Tianyu Bai Â© 2026</span>
Â  Â  Â  <span class="m-zh">æœ¬ç½‘é¡µç”± Tianyu Bai è®¾è®¡åˆ¶ä½œ Â© 2026</span>
Â  Â  </div>
Â  </div>
</div>
Â 
<div class="controls-container">
Â  <div id="lang-toggle" class="ctrl-btn" title="Switch Language">EN/CN</div>
Â  <div id="theme-toggle" class="ctrl-btn" title="Switch Theme">â˜€ï¸</div>
</div>
Â 
<div class="cursor-dot"></div>
<div class="cursor-outline"></div>
<div id="progress-bar"></div>
<div id="vanta-bg"></div>
Â 
<canvas id="meteor-canvas"></canvas>
Â 
<div id="bot-container" title="Chat with me!">
Â  <div class="guide-arrow">â¤</div>
Â  <div class="pulse-ring"></div>
Â  <div id="bot-speech">System Online.</div>
Â  <div id="rpg-dialogue">
Â  Â  <div class="rpg-close">Ã—</div>
Â  Â  <div><span id="rpg-text">Initializing...</span><span id="rpg-cursor"></span></div>
Â  Â  <div id="rpg-options"></div>
Â  </div>
Â  <div class="bot-antenna"></div>
Â  <div class="bot-head">
Â  Â  <div class="bot-eye"><div class="bot-pupil"></div><div class="bot-lid"></div></div>
Â  Â  <div class="bot-eye"><div class="bot-pupil"></div><div class="bot-lid"></div></div>
Â  Â  <div class="bot-mouth"></div>
Â  </div>
</div>
Â 
<div class="layout-wrapper">
Â  <div class="container">
Â  Â  <section id="main_content">
Â  Â  Â  {{ content }}
Â  Â  </section>
Â 
Â  Â  <div class="typewriter-container">
Â  Â  Â  <span id="typewriter-text"></span><span class="typewriter-cursor"></span>
Â  Â  </div>
Â 
Â  Â  <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); text-align: center; color: #94a3b8; font-size: 0.85rem;">
Â  Â  Â  <p> E-Link â€¢ COPYRIGHT Â© 2026 Tianyu Bai</p>
Â  Â  </footer>
Â  </div>
</div>
Â 
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
<script>
Â  // --- ğŸŒ åŒè¯­æ•°æ®æº ---
Â  const dialogData_EN = {
Â  Â  "start": {
Â  Â  Â  text: "Hi! I'm the Connector Guardian. I protect your neural interfaces.",
Â  Â  Â  options: [Â 
Â  Â  Â  Â  Â { text: "ğŸ¬ Watch Demo Video", next: "play_video" },
Â  Â  Â  Â  Â { text: "ğŸš€ Let's start!", next: "root_menu" }Â 
Â  Â  Â  ]
Â  Â  },
Â  Â  "play_video": {
Â  Â  Â  Â text: "Initiating Cinema Mode... Loading visual data.",
Â  Â  Â  Â options: [ { text: "Close Video", next: "start" } ]
Â  Â  },
Â  Â  "root_menu": {
Â  Â  Â  text: "Select a category to inspect:",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "ğŸŒŸ What's Special?", next: "innovation" },
Â  Â  Â  Â  { text: "ğŸ“Š Specifications (Weight/Noise)", next: "specs_menu" },
Â  Â  Â  Â  { text: "ğŸ›¡ï¸ Reliability & Durability", next: "reliability_menu" },
Â  Â  Â  Â  { text: "ğŸ”§ Usage & Compatibility", next: "usage_menu" },
Â  Â  Â  Â  { text: "Just browsing", next: "close" }
Â  Â  Â  ]
Â  Â  },
Â  Â  "innovation": {
Â  Â  Â  text: "I feature a novel elastomeric interposer. This means NO precise alignment is needed and ZERO insertion force.",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "Why is 'Zero Force' better?", next: "zero_force" },
Â  Â  Â  Â  { text: "Can it scale up?", next: "scalability" },
Â  Â  Â  Â  { text: "Back to Menu", next: "root_menu" }Â 
Â  Â  Â  ]
Â  Â  },
Â  Â  "zero_force": {
Â  Â  Â  text: "Traditional plugs require high force, risking probe fracture. My threaded cap converts rotation into gentle vertical pressure, protecting delicate films.",
Â  Â  Â  options: [ { text: "Cool! Back.", next: "innovation" } ]
Â  Â  },
Â  Â  "scalability": {
Â  Â  Â  text: "Yes! The fine-pitch elastomer allows scaling to 1024 channels within the same 25mm footprint. I am future-proof.",
Â  Â  Â  options: [ { text: "Got it, Back.", next: "innovation" } ]
Â  Â  },
Â  Â  "specs_menu": {
Â  Â  Â  text: "Checking Diagnostics... Which parameter concerns you?",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "Is it heavy? (Weight)", next: "weight" },
Â  Â  Â  Â  { text: "Does it get hot? (Thermal)", next: "thermal" },
Â  Â  Â  Â  { text: "How clean is the signal? (Noise)", next: "noise" },
Â  Â  Â  Â  { text: "Back to Menu", next: "root_menu" }
Â  Â  Â  ]
Â  Â  },
Â  Â  "weight": {
Â  Â  Â  text: "I am ultra-light. Detached weight is only 2.8g. Even housed, I am 57% lighter (6.6g) than competitors, reducing strain on the animal.",
Â  Â  Â  options: [ { text: "Good for mice/rats.", next: "specs_menu" } ]
Â  Â  },
Â  Â  "thermal": {
Â  Â  Â  text: "I stay cool. Steady-state temperature is 30.5Â°C, well below the 37Â°C biological threshold. No active cooling required.",
Â  Â  Â  options: [ { text: "Safe confirmed.", next: "specs_menu" } ]
Â  Â  },
Â  Â  "noise": {
Â  Â  Â  text: "Crystal clear. My noise floor is 2.68 Â± 0.46 ÂµV RMS, matching the theoretical limit of the Intan chips. No signal degradation.",
Â  Â  Â  options: [ { text: "Great specs.", next: "specs_menu" } ]
Â  Â  },
Â  Â  "reliability_menu": {
Â  Â  Â  text: "I am built to last. What is your concern?",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "Lifespan (Cycles)", next: "cycles" },
Â  Â  Â  Â  { text: "What if I align it wrong?", next: "misalignment" },
Â  Â  Â  Â  { text: "Contact Impedance?", next: "impedance" },
Â  Â  Â  Â  { text: "Back to Menu", next: "root_menu" }
Â  Â  Â  ]
Â  Â  },
Â  Â  "cycles": {
Â  Â  Â  text: "Verified for 100+ mating cycles with >97% connection yield. The elastomer shows negligible wear.",
Â  Â  Â  options: [ { text: "Solid.", next: "reliability_menu" } ]
Â  Â  },
Â  Â  "misalignment": {
Â  Â  Â  text: "No problem. The elastomer has 'structural redundancy' (pitch < pad size). Even with radial misalignment, the connection holds.",
Â  Â  Â  options: [ { text: "Very forgiving.", next: "reliability_menu" } ]
Â  Â  },
Â  Â  "impedance": {
Â  Â  Â  text: "Low and stable. Contact impedance is consistently between 0.3 kÎ© and 0.4 kÎ© across the array.",
Â  Â  Â  options: [ { text: "Acknowledged.", next: "reliability_menu" } ]
Â  Â  },
Â  Â  "usage_menu": {
Â  Â  Â  text: "Designed for researchers. Ask me about usage:",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "Is assembly difficult?", next: "assembly" },
Â  Â  Â  Â  { text: "Compatible Systems?", next: "system" },
Â  Â  Â  Â  { text: "For freely moving animals?", next: "animal" },
Â  Â  Â  Â  { text: "Back to Menu", next: "root_menu" }
Â  Â  Â  ]
Â  Â  },
Â  Â  "assembly": {
Â  Â  Â  text: "Easy. No specialized micro-soldering needed. It's a 'plug-and-play' assembly using standard tools.",
Â  Â  Â  options: [ { text: "User friendly.", next: "usage_menu" } ]
Â  Â  },
Â  Â  "system": {
Â  Â  Â  text: "Fully compatible with the Intan RHD recording system. Supports 64, 128, and 256 channel configurations.",
Â  Â  Â  options: [ { text: "Perfect.", next: "usage_menu" } ]
Â  Â  },
Â  Â  "animal": {
Â  Â  Â  text: "Yes. The low profile fits mechanical commutators, allowing natural behavior without cable twisting.",
Â  Â  Â  options: [ { text: "Show me the files!", next: "show_badges" } ]
Â  Â  },
Â  Â  "show_badges": {
Â  Â  Â  text: "Scroll to the bottom! ğŸ‘‡ Those icons are your gateway to the Code, Fabrication Files, and Demo Videos.",
Â  Â  Â  options: [ { text: "Thanks, Guardian!", next: "close" } ]
Â  Â  }
Â  };

Â  const dialogData_ZH = {
Â  Â  "start": {
Â  Â  Â  text: "ä½ å¥½ï¼æˆ‘æ˜¯æ˜“é“¾çš„å®ˆæŠ¤è€…ã€‚ç”±æˆ‘æ¥ä¿æŠ¤ä½ çš„è„‘æœºæ¢é’ˆã€‚",
Â  Â  Â  options: [Â 
Â  Â  Â  Â  { text: "ğŸ¬ è§‚çœ‹æ¼”ç¤ºè§†é¢‘", next: "play_video" },
Â  Â  Â  Â  { text: "ğŸš€ å¼€å§‹æ¢ç´¢ï¼", next: "root_menu" }Â 
Â  Â  Â  ]
Â  Â  },
Â  Â  "play_video": {
Â  Â  Â  Â text: "æ­£åœ¨å¯åŠ¨å½±é™¢æ¨¡å¼... è°ƒå–è§†è§‰æ•°æ®ã€‚",
Â  Â  Â  Â options: [ { text: "å…³é—­è§†é¢‘", next: "start" } ]
Â  Â  },
Â  Â  "root_menu": {
Â  Â  Â  text: "ç³»ç»Ÿå·²å°±ç»ªã€‚è¯·é€‰æ‹©æƒ³è¦æŸ¥çœ‹çš„ç±»åˆ«ï¼š",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "ğŸŒŸ æ ¸å¿ƒäº®ç‚¹", next: "innovation" },
Â  Â  Â  Â  { text: "ğŸ“Š è§„æ ¼å‚æ•° (é‡é‡/å™ªéŸ³)", next: "å‚æ•°èœå•" },
Â  Â  Â  Â  { text: "ğŸ›¡ï¸ å¯é æ€§ä¸è€ä¹…åº¦", next: "å¯é æ€§èœå•" },
Â  Â  Â  Â  { text: "ğŸ”§ ä½¿ç”¨ä¸å…¼å®¹æ€§", next: "usage_menu" },
Â  Â  Â  Â  { text: "éšä¾¿çœ‹çœ‹", next: "close" }
Â  Â  Â  ]
Â  Â  },
Â  Â  "innovation": {
Â  Â  Â  text: "æˆ‘é‡‡ç”¨äº†æ–°å‹å¼¹æ€§ä½“äº’è¿æŠ€æœ¯ (Elastomeric Interposer)ã€‚è¿™æ„å‘³ç€æ— éœ€ç²¾ç¡®å¯¹å‡†ï¼Œä¸”å®ç°äº†â€œé›¶æ’å…¥åŠ›â€ã€‚",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "â€œé›¶æ’å…¥åŠ›â€æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ", next: "é›¶æ’å…¥åŠ›" },
Â  Â  Â  Â  { text: "é€šé“æ•°èƒ½æ‰©å±•å—ï¼Ÿ", next: "å¯æ‹“å±•æ€§" },
Â  Â  Â  Â  { text: "è¿”å›ä¸»èœå•", next: "root_menu" }Â 
Â  Â  Â  ]
Â  Â  },
Â  Â  "é›¶æ’å…¥åŠ›": {
Â  Â  Â  text: "ä¼ ç»Ÿæ’å¤´éœ€è¦å¾ˆå¤§çš„åŠ›ï¼Œå®¹æ˜“å¼„æ–­è„†å¼±çš„æ¢é’ˆã€‚æˆ‘çš„èºçº¹ç›–å°†æ—‹è½¬è½¬åŒ–ä¸ºè½»æŸ”çš„å‚ç›´å‹åŠ›ï¼Œå®Œç¾ä¿æŠ¤è–„è†œæ¢é’ˆã€‚",
Â  Â  Â  options: [ { text: "å¾ˆæ£’çš„è®¾è®¡ï¼è¿”å›ã€‚", next: "innovation" } ]
Â  Â  },
Â  Â  "å¯æ‹“å±•æ€§": {
Â  Â  Â  text: "å½“ç„¶ï¼é«˜å¯†åº¦å¼¹æ€§ä½“å…è®¸åœ¨åŒæ ·çš„ 25mm å°è£…å†…æ‰©å±•è‡³ 1024 é€šé“ã€‚æˆ‘æ˜¯é¢å‘æœªæ¥çš„è®¾è®¡ã€‚",
Â  Â  Â  options: [ { text: "å·²çŸ¥æ™“ï¼Œè¿”å›ã€‚", next: "innovation" } ]
Â  Â  },
Â  Â  "å‚æ•°èœå•": {
Â  Â  Â  text: "æ­£åœ¨æ£€æŸ¥è¯Šæ–­æ•°æ®... ä½ å…³å¿ƒå“ªä¸ªå‚æ•°ï¼Ÿ",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "é‡ä¸é‡ï¼Ÿ (é‡é‡)", next: "weight" },
Â  Â  Â  Â  { text: "å‘çƒ­å—ï¼Ÿ (çƒ­å­¦)", next: "thermal" },
Â  Â  Â  Â  { text: "ä¿¡å·å¹²å‡€å—ï¼Ÿ (å™ªéŸ³)", next: "noise" },
Â  Â  Â  Â  { text: "è¿”å›ä¸»èœå•", next: "root_menu" }
Â  Â  Â  ]
Â  Â  },
Â  Â  "weight": {
Â  Â  Â  text: "æˆ‘éå¸¸è½»ã€‚æ‹†å¸åä»…é‡ 2.8gã€‚å³ä½¿å«å¤–å£³ï¼Œæˆ‘ä¹Ÿæ¯”ç«å“è½» 57% (6.6g)ï¼Œå¤§å¤§å‡è½»äº†åŠ¨ç‰©çš„è´Ÿæ‹…ã€‚",
Â  Â  Â  options: [ { text: "å¾ˆé€‚åˆå°é¼ /å¤§é¼ ã€‚", next: "specs_menu" } ]
Â  Â  },
Â  Â  "thermal": {
Â  Â  Â  text: "æˆ‘è¿è½¬å†·é™ã€‚ç¨³æ€æ¸©åº¦ä»…ä¸º 30.5Â°Cï¼Œè¿œä½äº 37Â°C çš„ç”Ÿç‰©é˜ˆå€¼ã€‚æ— éœ€ä¸»åŠ¨æ•£çƒ­ã€‚",
Â  Â  Â  options: [ { text: "å®‰å…¨ç¡®è®¤ã€‚", next: "specs_menu" } ]
Â  Â  },
Â  Â  "noise": {
Â  Â  Â  text: "å™ªå£°å¾ˆå°ã€‚æˆ‘çš„æœ¬åº•å™ªå£°ä¸º 2.68 Â± 0.46 ÂµV RMSï¼Œæ¥è¿‘äº† Intan èŠ¯ç‰‡çš„ç†è®ºæé™ã€‚ä¿¡å·æ— æŸè€—ã€‚",
Â  Â  Â  options: [ { text: "å‚æ•°å¾ˆå¼ºã€‚", next: "specs_menu" } ]
Â  Â  },
Â  Â  "å¯é æ€§èœå•": {
Â  Â  Â  text: "æˆ‘ç»ä¹…è€ç”¨ã€‚çŒœä½ æœ‰å¯èƒ½æ‹…å¿ƒè¿™äº›ï¼Ÿ",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "å¯¿å‘½ (è´´åˆæ¬¡æ•°)", next: "cycles" },
Â  Â  Â  Â  { text: "å¦‚æœå¯¹ä¸å‡†æ€ä¹ˆåŠï¼Ÿ", next: "misalignment" },
Â  Â  Â  Â  { text: "æ¥è§¦ç”µé˜»å¤šå¤§ï¼Ÿ", next: "impedance" },
Â  Â  Â  Â  { text: "è¿”å›ä¸»èœå•", next: "root_menu" }
Â  Â  Â  ]
Â  Â  },
Â  Â  "cycles": {
Â  Â  Â  text: "å·²éªŒè¯ 100 æ¬¡ä»¥ä¸Šçš„æ’æ‹”å¾ªç¯ï¼Œè¿æ¥è‰¯ç‡ >97%ã€‚å¼¹æ€§å¯¼ç”µä½“å‡ ä¹æ²¡æœ‰ç£¨æŸã€‚",
Â  Â  Â  options: [ { text: "å¾ˆé è°±ï¼Œå·²çŸ¥æ™“", next: "å¯é æ€§èœå•" } ]
Â  Â  },
Â  Â  "misalignment": {
Â  Â  Â  text: "å¼¹æ€§ä½“å…·æœ‰â€œç»“æ„å†—ä½™â€ï¼ˆé—´è·å°äºç„Šç›˜å°ºå¯¸ï¼‰ã€‚å³ä½¿å¾„å‘æ²¡å¯¹å‡†ï¼Œä¾ç„¶èƒ½ç¨³å®šè¿æ¥ã€‚",
Â  Â  Â  options: [ { text: "å®¹é”™ç‡å¾ˆé«˜ï¼Œå·²çŸ¥æ™“", next: "å¯é æ€§èœå•" } ]
Â  Â  },
Â  Â  "impedance": {
Â  Â  Â  text: "ä½ä¸”ç¨³å®šã€‚æ•´ä¸ªé˜µåˆ—çš„æ¥è§¦é˜»æŠ—å§‹ç»ˆä¿æŒåœ¨ 0.3 kÎ© åˆ° 0.4 kÎ© ä¹‹é—´ã€‚",
Â  Â  Â  options: [ { text: "å·²çŸ¥æ™“", next: "å¯é æ€§èœå•" } ]
Â  Â  },
Â  Â  "usage_menu": {
Â  Â  Â  text: "ä¸“ä¸ºç›¸å…³é¢†åŸŸäººå‘˜è®¾è®¡ã€‚é—®æˆ‘å…³äºä½¿ç”¨çš„é—®é¢˜ï¼š",
Â  Â  Â  options: [
Â  Â  Â  Â  { text: "ç»„è£…å®¹æ˜“å—ï¼Ÿ", next: "assembly" },
Â  Â  Â  Â  { text: "å…¼å®¹å“ªäº›é‡‡é›†ç³»ç»Ÿï¼Ÿ", next: "system" },
Â  Â  Â  Â  { text: "åŠ¨ç‰©èƒ½è‡ªç”±æ´»åŠ¨å—ï¼Ÿ", next: "animal" },
Â  Â  Â  Â  { text: "è¿”å›ä¸»èœå•", next: "root_menu" }
Â  Â  Â  ]
Â  Â  },
Â  Â  "assembly": {
Â  Â  Â  text: "éå¸¸å®¹æ˜“.å³æ‹§å³ç”¨çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œå‘Šåˆ«æ’æ‹”å¸¦æ¥çš„æ–­é’ˆå¼¯é’ˆï¼Œè½»æ¾å»ºç«‹è¿æ¥",
Â  Â  Â  options: [ { text: "å·²çŸ¥æ™“", next: "usage_menu" } ]
Â  Â  },
Â  Â  "system": {
Â  Â  Â  text: "å®Œå…¨å…¼å®¹Intan RHDè®°å½•ç³»ç»Ÿ. æ”¯æŒ64ï¼Œ128ï¼Œ256é€šé“è®¾å®š.",
Â  Â  Â  options: [ { text: "å®Œç¾ï¼Œå·²çŸ¥æ™“", next: "usage_menu" } ]
Â  Â  },
Â  Â  "animal": {
Â  Â  Â  text: "å¯ä»¥ã€‚ä½å‰–é¢è®¾è®¡é€‚é…æœºæ¢°æ¢å‘å™¨ (Commutator)ï¼Œå…è®¸åŠ¨ç‰©è‡ªç„¶è¡Œä¸ºï¼Œçº¿ç¼†ä¸æ‰“ç»“ã€‚",
Â  Â  Â  options: [ { text: "æˆ‘æƒ³æŸ¥çœ‹æ–‡ä»¶", next: "å¾½ç« æŒ‡å¼•" } ]
Â  Â  },
Â  Â  "å¾½ç« æŒ‡å¼•": {
Â  Â  Â  text: "æ»‘åˆ°æœ€ä¸‹é¢ï¼ğŸ‘‡çº¢è‰²å›¾æ ‡æ˜¯ä½ é€šå¾€ä»£ç ã€åˆ¶é€ æ–‡ä»¶å’Œæ¼”ç¤ºè§†é¢‘çš„å¤§é—¨ã€‚",
Â  Â  Â  options: [ { text: "è°¢è°¢æ˜“é“¾å®ˆæŠ¤è€…ï¼", next: "å…³é—­å¯¹è¯çª—" } ]
Â  Â  }
Â  };
Â  Â  Â 
Â  // é»˜è®¤ä½¿ç”¨è‹±æ–‡
Â  let currentLang = 'en';
Â  let dialogData = dialogData_EN;

Â  let vantaEffect;
Â Â 
Â  document.addEventListener("DOMContentLoaded", function() {
Â  Â  Â  if (window.VANTA) {
Â  Â  Â  Â  vantaEffect = VANTA.NET({
Â  Â  Â  Â  Â  el: "#vanta-bg",
Â  Â  Â  Â  Â  mouseControls: true, touchControls: true, gyroControls: false,
Â  Â  Â  Â  Â  minHeight: 200.00, minWidth: 200.00, scale: 1.00, scaleMobile: 1.00,
Â  Â  Â  Â  Â  color: 0x3b82f6, backgroundColor: 0x0a0a0f, points: 18.00, maxDistance: 28.00, spacing: 16.00, showDots: true
Â  Â  Â  Â  });
Â  Â  Â  }

Â  Â  Â  initMeteors();

Â  Â  Â  const images = document.querySelectorAll('#main_content img');
Â  Â  Â  images.forEach((img, index) => {
Â  Â  Â  Â  Â  if (index < 2) {
Â  Â  Â  Â  Â  Â  Â  img.setAttribute('loading', 'eager');Â 
Â  Â  Â  Â  Â  Â  Â  img.setAttribute('fetchpriority', 'high');Â 
Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  if(!img.getAttribute('loading')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â img.setAttribute('loading', 'lazy');
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }
Â  Â  Â  });
Â  });

Â  window.addEventListener('load', function() {
Â  Â  Â  const heavyMedia = document.querySelectorAll('img[src$=".gif"], video');
Â  Â  Â  heavyMedia.forEach(media => {
Â  Â  Â  Â  Â  media.setAttribute('loading', 'eager');
Â  Â  Â  Â  Â  if(media.tagName === 'VIDEO') {
Â  Â  Â  Â  Â  Â  Â  media.setAttribute('preload', 'auto');
Â  Â  Â  Â  Â  }
Â  Â  Â  });
Â  });

Â  const textsEN = ["Welcome to this webpageï¼", "Thanks for visiting us!", "Stay tuned!"];
Â  const textsZH = ["æ¬¢è¿è®¿é—®æœ¬ç½‘é¡µï¼", "æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼", "æ¬¢è¿å¸¸æ¥è®¿é—®ï¼"];
Â  let texts = textsEN; 
Â 
Â  let textIdx = 0, charIdx = 0, isDeleting = false;
Â  function type() {
Â  Â  const currentText = texts[textIdx];
Â  Â  const display = isDeleting ? currentText.substring(0, charIdx--) : currentText.substring(0, charIdx++);
Â  Â  document.getElementById('typewriter-text').textContent = display;
Â  Â  let speed = isDeleting ? 50 : 100;
Â  Â  if (!isDeleting && charIdx === currentText.length + 1) { isDeleting = true; speed = 2000; }Â 
Â  Â  else if (isDeleting && charIdx === 0) { isDeleting = false; textIdx = (textIdx + 1) % texts.length; speed = 500; }
Â  Â  setTimeout(type, speed);
Â  }

Â  function initMeteors() {
Â  Â  const canvas = document.getElementById('meteor-canvas');
Â  Â  if(!canvas) return;
Â  Â  const ctx = canvas.getContext('2d');
Â  Â  let width, height;
Â  Â  function resizeCanvas() {
Â  Â  Â  width = window.innerWidth;
Â  Â  Â  height = window.innerHeight;
Â  Â  Â  canvas.width = width;
Â  Â  Â  canvas.height = height;
Â  Â  }
Â  Â  window.addEventListener('resize', resizeCanvas);
Â  Â  resizeCanvas();

Â  Â  class Meteor {
Â  Â  Â  constructor() { this.reset(); }
Â  Â  Â  reset() {
Â  Â  Â  Â  this.x = Math.random() * width;
Â  Â  Â  Â  this.y = Math.random() * height;
Â  Â  Â  Â  this.len = Math.random() * 100 + 50;
Â  Â  Â  Â  this.speed = Math.random() * 1 + 1;
Â  Â  Â  Â  this.size = Math.random() * 1 + 0.5;
Â  Â  Â  Â  this.angle = (Math.PI * 0.75) + (Math.random() - 0.5) * 0.5;
Â  Â  Â  Â  this.opacity = 0;
Â  Â  Â  Â  this.state = 'fadein'; 
Â  Â  Â  Â  this.life = 0;
Â  Â  Â  Â  this.maxLife = Math.random() * 30 + 20; 
Â  Â  Â  }
Â  Â  Â  update() {
Â  Â  Â  Â  this.x += Math.cos(this.angle) * this.speed;
Â  Â  Â  Â  this.y += Math.sin(this.angle) * this.speed;
Â  Â  Â  Â  if(this.state === 'fadein') {
Â  Â  Â  Â  Â  Â this.opacity += 0.1;
Â  Â  Â  Â  Â  Â if(this.opacity >= 1) this.state = 'active';
Â  Â  Â  Â  } else if(this.state === 'active') {
Â  Â  Â  Â  Â  Â this.life++;
Â  Â  Â  Â  Â  Â if(this.life > this.maxLife) this.state = 'fadeout';
Â  Â  Â  Â  } else if(this.state === 'fadeout') {
Â  Â  Â  Â  Â  Â this.opacity -= 0.05;
Â  Â  Â  Â  Â  Â if(this.opacity <= 0) this.reset();
Â  Â  Â  Â  }
Â  Â  Â  Â  if(this.x < -100 || this.x > width + 100 || this.y < -100 || this.y > height + 100) {
Â  Â  Â  Â  Â  Â this.reset();
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  draw() {
Â  Â  Â  Â  if(this.opacity <= 0) return;
Â  Â  Â  Â  const tailX = this.x - Math.cos(this.angle) * this.len;
Â  Â  Â  Â  const tailY = this.y - Math.sin(this.angle) * this.len;
Â  Â  Â  Â  const gradient = ctx.createLinearGradient(this.x, this.y, tailX, tailY);
Â  Â  Â  Â  gradient.addColorStop(0, `rgba(96, 165, 250, ${this.opacity})`);Â 
Â  Â  Â  Â  gradient.addColorStop(1, `rgba(59, 130, 246, 0)`);Â Â 
Â  Â  Â  Â  ctx.beginPath();
Â  Â  Â  Â  ctx.moveTo(this.x, this.y);
Â  Â  Â  Â  ctx.lineTo(tailX, tailY);
Â  Â  Â  Â  ctx.strokeStyle = gradient;
Â  Â  Â  Â  ctx.lineWidth = this.size;
Â  Â  Â  Â  ctx.lineCap = 'round';
Â  Â  Â  Â  ctx.stroke();
Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  const meteors = [];
Â  Â  const meteorCount = 6;Â 
Â  Â  for(let i=0; i<meteorCount; i++) {
Â  Â  Â  Â const m = new Meteor();
Â  Â  Â  Â m.opacity = 0;Â 
Â  Â  Â  Â m.life = Math.random() * 50;
Â  Â  Â  Â meteors.push(m);
Â  Â  }
Â  Â Â 
Â  Â  function animateMeteors() {
Â  Â  Â  ctx.clearRect(0, 0, width, height);
Â  Â  Â  meteors.forEach(m => { m.update(); m.draw(); });
Â  Â  Â  requestAnimationFrame(animateMeteors);
Â  Â  }
Â  Â  animateMeteors();
Â  }
Â 
Â  document.addEventListener("DOMContentLoaded", function() {
Â  Â  type();
Â  Â  const cursorDot = document.querySelector('.cursor-dot');
Â  Â  const cursorOutline = document.querySelector('.cursor-outline');
Â  Â  const container = document.querySelector('.container');
Â  Â  const pupils = document.querySelectorAll('.bot-pupil');
Â  Â  const botContainer = document.getElementById('bot-container');
Â  Â  const botSpeech = document.getElementById('bot-speech');
Â  Â  Â  Â 
Â  Â  const rpgDialogue = document.getElementById('rpg-dialogue');
Â  Â  const rpgText = document.getElementById('rpg-text');
Â  Â  const rpgOptions = document.getElementById('rpg-options');
Â  Â  const rpgClose = document.querySelector('.rpg-close');
Â  Â  let typeTimer = null;
Â 
Â  Â  const welcomeModal = document.getElementById('welcome-modal');
Â  Â  const modalKeepDarkBtn = document.getElementById('modal-keep-dark-btn');
Â  Â  const modalSwitchLightBtn = document.getElementById('modal-switch-light-btn');
Â  Â  const modalLangCheckbox = document.getElementById('modal-lang-toggle-checkbox');
Â  Â  let modalIsZh = false;Â 
Â 
Â  Â  setTimeout(() => {
Â  Â  Â  welcomeModal.classList.add('show');
Â  Â  }, 100);
Â 
Â  Â  let idleInterval;
Â  Â  let tipIndex = 0;
Â 
Â  Â  function startIdleTips() {
Â  Â  Â  if(idleInterval) clearInterval(idleInterval);
Â  Â  Â  const enTips = ["Click me for guide!", "I'm here to help!"];
Â  Â  Â  const zhTips = ["æˆ‘æ˜¯E-Linkä¸“å±ç®¡å®¶", "æ¬¢è¿éšæ—¶â€œæ•²â€æˆ‘å“ˆï¼"];
Â  Â  Â  const runCycle = () => {
Â  Â  Â  Â  Â const tips = currentLang === 'en' ? enTips : zhTips;
Â  Â  Â  Â  Â botSay(tips[tipIndex], 3000);Â 
Â  Â  Â  Â  Â tipIndex = (tipIndex + 1) % 2;
Â  Â  Â  };
Â  Â  Â  runCycle();Â 
Â  Â  Â  idleInterval = setInterval(runCycle, 3500);
Â  Â  }
Â 
Â  Â  function closeModal() {
Â  Â  Â  welcomeModal.classList.remove('show');
Â  Â  Â  if (modalIsZh) {
Â  Â  Â  Â  if (currentLang !== 'zh') langToggle.click();Â 
Â  Â  Â  } else {
Â  Â  Â  Â  if (currentLang === 'zh') langToggle.click();
Â  Â  Â  }
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  botContainer.classList.add('attention-jump');Â 
Â  Â  Â  Â  Â  startIdleTips();
Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  botContainer.classList.remove('attention-jump');
Â  Â  Â  Â  Â  }, 3200);
Â  Â  Â  }, 100);
Â  Â  }
Â 
Â  Â  modalKeepDarkBtn.addEventListener('click', closeModal);
Â  Â  modalSwitchLightBtn.addEventListener('click', () => {
Â  Â  Â  themeToggle.click();Â 
Â  Â  Â  closeModal();Â  Â  Â  Â Â 
Â  Â  });
Â 
Â  Â  modalLangCheckbox.addEventListener('change', () => {
Â  Â  Â  const enTexts = document.querySelectorAll('.m-en');
Â  Â  Â  const zhTexts = document.querySelectorAll('.m-zh');
Â  Â  Â  modalIsZh = modalLangCheckbox.checked;
Â  Â  Â  if (modalIsZh) {
Â  Â  Â  Â  enTexts.forEach(el => el.style.display = 'none');
Â  Â  Â  Â  zhTexts.forEach(el => el.style.display = 'inline');Â 
Â  Â  Â  } else {
Â  Â  Â  Â  zhTexts.forEach(el => el.style.display = 'none');
Â  Â  Â  Â  enTexts.forEach(el => el.style.display = 'inline');
Â  Â  Â  }
Â  Â  });
Â 
Â  Â  const themeToggle = document.getElementById('theme-toggle');
Â  Â  const langToggle = document.getElementById('lang-toggle');
Â  Â  let isLight = false;
Â  Â  Â  Â 
Â  Â  themeToggle.addEventListener('click', () => {
Â  Â  Â  isLight = !isLight;
Â  Â  Â  document.body.classList.toggle('light-mode');
Â  Â  Â  if (isLight) {
Â  Â  Â  Â  themeToggle.textContent = "ğŸŒ™";Â 
Â  Â  Â  Â  if (vantaEffect) vantaEffect.setOptions({ color: 0x2563eb, backgroundColor: 0xf1f5f9, points: 12.00, maxDistance: 24.00 });
Â  Â  Â  } else {
Â  Â  Â  Â  themeToggle.textContent = "â˜€ï¸";Â 
Â  Â  Â  Â  if (vantaEffect) vantaEffect.setOptions({ color: 0x3b82f6, backgroundColor: 0x0a0a0f, points: 18.00, maxDistance: 28.00 });
Â  Â  Â  }
Â  Â  });
Â 
Â  Â  langToggle.addEventListener('click', () => {
Â  Â  Â  const enContent = document.querySelectorAll('.lang-en');
Â  Â  Â  const zhContent = document.querySelectorAll('.lang-zh');
Â  Â  Â  if (currentLang === 'en') {
Â  Â  Â  Â  Â  Â currentLang = 'zh';
Â  Â  Â  Â  Â  Â dialogData = dialogData_ZH;Â 
Â  Â  Â  Â  Â  Â texts = textsZH;Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â langToggle.textContent = "ä¸­ / è‹±";
Â  Â  Â  Â  Â  Â enContent.forEach(el => el.style.display = 'none');
Â  Â  Â  Â  Â  Â zhContent.forEach(el => el.style.display = 'block');
Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â currentLang = 'en';
Â  Â  Â  Â  Â  Â dialogData = dialogData_EN;
Â  Â  Â  Â  Â  Â texts = textsEN;
Â  Â  Â  Â  Â  Â langToggle.textContent = "EN / CN";
Â  Â  Â  Â  Â  Â enContent.forEach(el => el.style.display = 'block');
Â  Â  Â  Â  Â  Â zhContent.forEach(el => el.style.display = 'none');
Â  Â  Â  }
Â  Â  Â  textIdx = 0; charIdx = 0; isDeleting = false;
Â  Â  Â  if(rpgDialogue.classList.contains('active')) closeDialogue();
Â  Â  Â  if (!rpgDialogue.classList.contains('active') && idleInterval) {
Â  Â  Â  Â  Â  Â startIdleTips();
Â  Â  Â  }
Â  Â  });
Â 
Â  Â  let mouseX = window.innerWidth / 2;
Â  Â  let mouseY = 100;
Â  Â  
Â  Â  // âš¡ï¸ æ€§èƒ½ä¼˜åŒ–ï¼šé€šè¿‡ requestAnimationFrame èŠ‚æµé¼ æ ‡ç§»åŠ¨äº‹ä»¶ï¼Œé˜²æ­¢ä¸æ»‘åŠ¨äº§ç”Ÿå¸§ç‡æŠ¢å 
Â  Â  let mouseTicking = false;
Â  Â  window.addEventListener('mousemove', (e) => {
Â  Â  Â  mouseX = e.clientX;
Â  Â  Â  mouseY = e.clientY;
Â  Â  Â  if (!mouseTicking) {
Â  Â  Â  Â  window.requestAnimationFrame(() => {
Â  Â  Â  Â  Â  if(cursorDot) { cursorDot.style.left = `${mouseX}px`; cursorDot.style.top = `${mouseY}px`; }
Â  Â  Â  Â  Â  if(cursorOutline) { cursorOutline.animate({ left: `${mouseX}px`, top: `${mouseY}px` }, { duration: 100, fill: "forwards" }); }
Â  Â  Â  Â  Â  if (window.innerWidth > 768 && container) {
Â  Â  Â  Â  Â  Â  const rx = (window.innerWidth / 2 - mouseX) / 50;
Â  Â  Â  Â  Â  Â  const ry = (window.innerHeight / 2 - mouseY) / 50;
Â  Â  Â  Â  Â  Â  container.style.transform = `rotateY(${rx * -1}deg) rotateX(${ry}deg)`;
Â  Â  Â  Â  Â  Â  const rect = container.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  container.style.setProperty("--mouse-x", `${mouseX - rect.left}px`);
Â  Â  Â  Â  Â  Â  container.style.setProperty("--mouse-y", `${mouseY - rect.top}px`);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  pupils.forEach(p => {
Â  Â  Â  Â  Â  Â  const rect = p.parentElement.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  const cx = rect.left + rect.width / 2, cy = rect.top + rect.height / 2;
Â  Â  Â  Â  Â  Â  const angle = Math.atan2(mouseY - cy, mouseX - cx);
Â  Â  Â  Â  Â  Â  const dist = Math.min(6, Math.hypot(mouseX - cx, mouseY - cy) / 10);
Â  Â  Â  Â  Â  Â  p.style.transform = `translate(calc(-50% + ${Math.cos(angle) * dist}px), calc(-50% + ${Math.sin(angle) * dist}px))`;
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  mouseTicking = false;
Â  Â  Â  Â  });
Â  Â  Â  Â  mouseTicking = true;
Â  Â  Â  }
Â  Â  }, { passive: true }); // å£°æ˜è¢«åŠ¨äº‹ä»¶ï¼Œæå‡æµè§ˆå™¨å¤„ç†ä¼˜å…ˆçº§
Â 
Â  Â  // âš¡ï¸ æ€§èƒ½ä¼˜åŒ–ï¼šä¸º scroll äº‹ä»¶é…ç½®èŠ‚æµå’Œ passive: trueï¼Œå¤§å¹…å‡å°‘é¡µé¢é‡ç»˜(Repaint)é¢‘ç‡
Â  Â  let scrollTicking = false;
Â  Â  window.addEventListener('scroll', () => {
Â  Â  Â  if (!scrollTicking) {
Â  Â  Â  Â  window.requestAnimationFrame(() => {
Â  Â  Â  Â  Â  const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
Â  Â  Â  Â  Â  const pb = document.getElementById("progress-bar");
Â  Â  Â  Â  Â  if(pb) pb.style.width = scrolled + "%";
Â  Â  Â  Â  Â  if(botContainer && window.innerWidth > 768) {
Â  Â  Â  Â  Â  Â  if(window.scrollY > 200) { botContainer.classList.add('fixed-mode'); }Â 
Â  Â  Â  Â  Â  Â  else { botContainer.classList.remove('fixed-mode'); }
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  scrollTicking = false;
Â  Â  Â  Â  });
Â  Â  Â  Â  scrollTicking = true;
Â  Â  Â  }
Â  Â  }, { passive: true }); // ä¸é˜»å¡æ»‘åŠ¨ä¸»å¹²é“
Â 
Â  Â  function botSay(text, duration = 2000) {
Â  Â  Â  if(!botSpeech || !botContainer || rpgDialogue.classList.contains('active')) return;Â 
Â  Â  Â  botSpeech.textContent = text;
Â  Â  Â  botContainer.classList.add('speaking');
Â  Â  Â  if(botContainer.speechTimer) clearTimeout(botContainer.speechTimer);
Â  Â  Â  botContainer.speechTimer = setTimeout(() => {
Â  Â  Â  Â  botContainer.classList.remove('speaking');
Â  Â  Â  }, duration);
Â  Â  }

Â  Â  const videoModal = document.getElementById('video-modal');
Â  Â  const guardianVideo = document.getElementById('guardian-video');

Â  Â  window.openVideoModal = function() {
Â  Â  Â  videoModal.classList.add('show');
Â  Â  Â  botContainer.classList.add('guide-mode');
Â  Â  Â  const clickText = currentLang === 'en' ? "Click the Play button here! ğŸ‘‰" : "è¯·ç‚¹å‡»ä¸­é—´çš„æ’­æ”¾æŒ‰é’®ï¼ğŸ‘‰";
Â  Â  Â  botSay(clickText, 4000);Â 
Â  Â  Â  closeDialogue();Â 
Â  Â  }

Â  Â  window.closeVideoModal = function() {
Â  Â  Â  videoModal.classList.remove('show');
Â  Â  Â  guardianVideo.pause();Â 
Â  Â  Â  botContainer.classList.remove('guide-mode');
Â  Â  Â  const backText = currentLang === 'en' ? "Did you see that mechanism?" : "çœ‹åˆ°é‚£ä¸ªæœºæ¢°ç»“æ„äº†å—ï¼Ÿ";
Â  Â  Â  setTimeout(() => botSay(backText, 3000), 500);
Â  Â  }
Â  Â Â 
Â  Â  videoModal.addEventListener('click', (e) => {
Â  Â  Â  if(e.target === videoModal) closeVideoModal();
Â  Â  });

Â  Â  function showDialogueNode(nodeKey, isFastMode = false) {
Â  Â  Â  if (nodeKey === 'play_video') {
Â  Â  Â  Â  Â const loadingText = currentLang === 'en' ? "Accessing Video Feed..." : "æ­£åœ¨æ¥å…¥è§†é¢‘ä¿¡å·...";
Â  Â  Â  Â  Â botSay(loadingText, 2000);
Â  Â  Â  Â  Â setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â openVideoModal();
Â  Â  Â  Â  Â }, 1000);
Â  Â  Â  Â  Â return;Â 
Â  Â  Â  }

Â  Â  Â  if(nodeKey === 'close') {Â 
Â  Â  Â  Â  Â  Â closeDialogue();Â 
Â  Â  Â  Â  Â  Â botContainer.classList.add('interaction-done');
Â  Â  Â  Â  Â  Â const byeText = currentLang === 'en' ? "Nice chatting with you!" : "å¾ˆé«˜å…´ä¸ä½ äº¤è°ˆï¼";
Â  Â  Â  Â  Â  Â botSay(byeText, 3000);Â 
Â  Â  Â  Â  Â  Â return;Â 
Â  Â  Â  }Â  Â 
Â  Â  Â Â 
Â  Â  Â  const node = dialogData[nodeKey];
Â  Â  Â  if(!node) return;
Â  Â  Â  rpgOptions.innerHTML = '';Â 
Â  Â  Â  if(typeTimer) clearInterval(typeTimer);
Â 
Â  Â  Â  const showButtons = () => {
Â  Â  Â  Â  Â  Â node.options.forEach((opt, idx) => {
Â  Â  Â  Â  Â  Â  Â const btn = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â btn.className = 'rpg-btn';Â 
Â  Â  Â  Â  Â  Â  Â btn.textContent = '> ' + opt.text;
Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â const isBackAction = opt.text.includes("Back") || opt.text.includes("è¿”å›");
Â 
Â  Â  Â  Â  Â  Â  Â if(isFastMode) {
Â  Â  Â  Â  Â  Â  Â  Â  Â btn.style.opacity = 1;
Â  Â  Â  Â  Â  Â  Â  Â  Â btn.style.transform = 'translateX(0)';
Â  Â  Â  Â  Â  Â  Â  Â  Â btn.style.animation = 'none';Â 
Â  Â  Â  Â  Â  Â  Â } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â btn.style.animationDelay = `${idx * 0.1}s`;
Â  Â  Â  Â  Â  Â  Â }
Â 
Â  Â  Â  Â  Â  Â  Â btn.onclick = (e) => {Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â e.stopPropagation();Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â showDialogueNode(opt.next, isBackAction);Â 
Â  Â  Â  Â  Â  Â  Â };
Â  Â  Â  Â  Â  Â  Â rpgOptions.appendChild(btn);
Â  Â  Â  Â  Â  Â });
Â  Â  Â  };
Â 
Â  Â  Â  if (isFastMode) {
Â  Â  Â  Â  Â  Â rpgText.textContent = node.text;Â 
Â  Â  Â  Â  Â  Â showButtons();
Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â rpgText.textContent = '';
Â  Â  Â  Â  Â  Â let i = 0;
Â  Â  Â  Â  Â  Â typeTimer = setInterval(() => {
Â  Â  Â  Â  Â  Â  Â rpgText.textContent += node.text.charAt(i); i++;
Â  Â  Â  Â  Â  Â  Â if(i >= node.text.length) {
Â  Â  Â  Â  Â  Â  Â  Â clearInterval(typeTimer);
Â  Â  Â  Â  Â  Â  Â  Â showButtons();
Â  Â  Â  Â  Â  Â  Â }
Â  Â  Â  Â  Â  Â }, 30);
Â  Â  Â  }
Â  Â  }
Â 
Â  Â  function openDialogue() {
Â  Â  Â  if(rpgDialogue.classList.contains('active')) return;
Â  Â  Â  rpgDialogue.classList.add('active');
Â  Â  Â  botContainer.classList.add('speaking');
Â  Â  Â  botContainer.classList.add('hint-removed');Â 
Â  Â  Â  showDialogueNode('start');
Â  Â  }
Â 
Â  Â  function closeDialogue() {
Â  Â  Â  rpgDialogue.classList.remove('active');
Â  Â  Â  botContainer.classList.remove('speaking');
Â  Â  Â  setTimeout(() => { rpgText.textContent = ''; rpgOptions.innerHTML = ''; }, 300);
Â  Â  }
Â 
Â  Â  if(botContainer) {
Â  Â  Â  botContainer.addEventListener('click', (e) => {
Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  if (idleInterval) {
Â  Â  Â  Â  Â  Â  clearInterval(idleInterval);
Â  Â  Â  Â  Â  Â  idleInterval = null;
Â  Â  Â  Â  }
Â  Â  Â  Â  if(botContainer.speechTimer) clearTimeout(botContainer.speechTimer);Â 
Â  Â  Â  Â  botSpeech.textContent = "";Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  botContainer.classList.remove('speaking');Â 
Â  Â  Â  Â  if(rpgDialogue.classList.contains('active')) closeDialogue();
Â  Â  Â  Â  else openDialogue();
Â  Â  Â  });
Â  Â  }
Â 
Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â const guideText = currentLang === 'en' ? "Click me for guide!" : "ç‚¹å‡»æˆ‘ç­”ç–‘è§£æƒ‘";
Â  Â  Â  Â  Â botSay(guideText, 60000);Â 
Â  Â  }, 1000);
Â 
Â  Â  const badges = document.querySelectorAll('.nav-badges a');
Â  Â  badges.forEach(b => {
Â  Â  Â  b.addEventListener('mouseenter', () => {
Â  Â  Â  Â  document.body.classList.add('badge-hovering', 'hovering');
Â  Â  Â  Â  if(vantaEffect) vantaEffect.setOptions({ color: 0x60a5fa });
Â  Â  Â  Â  const accessText = currentLang === 'en' ? "Accessing..." : "æ­£åœ¨è®¿é—®...";
Â  Â  Â  Â  botSay(accessText, 1500);
Â  Â  Â  });
Â  Â  Â  b.addEventListener('mouseleave', () => {
Â  Â  Â  Â  document.body.classList.remove('badge-hovering', 'hovering');
Â  Â  Â  Â  if(vantaEffect) vantaEffect.setOptions({ color: 0x3b82f6 });
Â  Â  Â  });
Â  Â  Â  b.addEventListener('click', function(e) {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const url = this.href;
Â  Â  Â  Â  badges.forEach((sib, idx) => {
Â  Â  Â  Â  Â  Â  const img = sib.querySelector('img');
Â  Â  Â  Â  Â  Â  img.style.animationDelay = `${Math.abs(idx - [...badges].indexOf(this)) * 0.06}s`;
Â  Â  Â  Â  Â  Â  img.classList.add('rippling');
Â  Â  Â  Â  });
Â  Â  Â  Â  setTimeout(() => window.location.href = url, 500);
Â  Â  Â  });
Â  Â  });
Â  });
</script>
</body>
</html>
