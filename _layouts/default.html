<!doctype html>
<html lang="en">
 <head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   
   <title>{{ page.title }}</title>
   <link rel="shortcut icon" type="image/x-icon" href="{{ '/Images/icon/favicon.ico' | relative_url }}">
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono&display=swap" rel="stylesheet">
   
   <style>
     /* --- 0. 全局赛博设置 --- */
     body { 
       margin: 0; padding: 0; 
       color: #e2e8f0; /* 亮浅色文字提升对比度 */
       font-family: 'Inter', -apple-system, sans-serif; 
       line-height: 1.6; overflow-x: hidden; 
       cursor: none;
       background-color: #020617; /* 深色底色 */
       scrollbar-width: thin; scrollbar-color: #7dd3fc transparent;
     }
     @media (pointer: coarse) { body { cursor: auto; } }

     ::-webkit-scrollbar { width: 4px; }
     ::-webkit-scrollbar-thumb { background: rgba(56, 189, 248, 0.5); border-radius: 10px; }
     ::selection { background: #0ea5e9; color: #ffffff; }

     /* --- 1. 自定义光标 --- */
     .cursor-dot, .cursor-outline {
       position: fixed; top: 0; left: 0; transform: translate(-50%, -50%); border-radius: 50%; z-index: 99999; pointer-events: none;
     }
     .cursor-dot { width: 6px; height: 6px; background-color: #38bdf8; box-shadow: 0 0 10px #38bdf8; }
     .cursor-outline { width: 34px; height: 34px; border: 1px solid rgba(56, 189, 248, 0.4); transition: all 0.2s ease-out; }
     body.hovering .cursor-outline { width: 50px; height: 50px; background-color: rgba(56, 189, 248, 0.05); border-color: #38bdf8; }

     /* --- 2. 进度条 (赛博蓝) --- */
     #progress-bar {
       position: fixed; top: 0; left: 0; height: 2px;
       background: linear-gradient(90deg, #38bdf8, #818cf8, #c084fc); 
       width: 0%; z-index: 99999;
     }

     /* --- 3. 赛博背景容器 --- */
     #vanta-bg { position: fixed; z-index: -5; top: 0; left: 0; width: 100%; height: 100%; }

     /* --- 4. 布局包裹器 --- */
     .layout-wrapper {
       position: relative; max-width: 860px; margin: 80px auto 60px; z-index: 10;
       perspective: 1200px;
     }

     /* --- 5. 机器人核心 (保留样式) --- */
     #bot-container {
       position: absolute; top: -55px; left: 50%; transform: translateX(-50%);
       width: 120px; height: 70px; z-index: 9999; cursor: pointer;
       opacity: 0; animation: botEnter 0.8s ease-out 0.8s forwards; transition: transform 0.3s;
     }
     .bot-head { 
       width: 90px; height: 45px; background: rgba(255, 255, 255, 0.9); 
       border: 2px solid #38bdf8; border-bottom: none; border-radius: 40px 40px 15px 15px; 
       margin: 0 auto; display: flex; justify-content: center; align-items: center; gap: 8px;
       animation: float-bot 3s ease-in-out infinite; box-shadow: 0 0 20px rgba(56, 189, 248, 0.2);
     }
     .bot-eye { width: 22px; height: 22px; background: #0f172a; border-radius: 50%; position: relative; overflow: hidden; }
     .bot-pupil { width: 10px; height: 10px; background: #38bdf8; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); box-shadow: 0 0 8px #38bdf8; }
     .bot-lid { position: absolute; top: 0; left: 0; width: 100%; height: 0%; background: white; z-index: 10; animation: blink 4s infinite; }
     .bot-antenna { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); width: 2px; height: 12px; background: #38bdf8; }
     .bot-antenna::after { content: ''; position: absolute; top: -6px; left: -3px; width: 8px; height: 8px; background: #38bdf8; border-radius: 50%; animation: pulse-antenna 2s infinite; }

     /* 悬停时的“超载”放电状态 */
     body.badge-hovering .bot-pupil { background: #f43f5e; box-shadow: 0 0 15px #f43f5e; }
     body.badge-hovering .bot-head { border-color: #f43f5e; }
     body.badge-hovering .bot-antenna::after { background: #f43f5e; animation: marquee-blink-blue 0.2s infinite; }

     /* --- 6. 容器 (毛玻璃 & 赛博边框) --- */
     .container { 
       position: relative; padding: 50px 70px; 
       background: rgba(15, 23, 42, 0.8); /* 深色透明 */
       backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
       border-radius: 16px; border: 1px solid rgba(56, 189, 248, 0.2); 
       border-top: 2px solid #38bdf8;
       box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
       opacity: 0; animation: fadeUp 0.8s ease-out 0.3s forwards;
     }

     /* 打字机样式应用区域 */
     .typewriter-text {
       font-family: 'JetBrains Mono', monospace;
       border-right: 2px solid #38bdf8;
       white-space: nowrap; overflow: hidden;
       animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
     }

     h1 { 
       font-size: 2rem; font-weight: 700; margin-bottom: 1.5rem;
       background: linear-gradient(90deg, #38bdf8, #a78bfa, #f43f5e);
       -webkit-background-clip: text; background-clip: text; color: transparent; 
     }

     /* --- 导航 Badge (保留形态) --- */
     .nav-badges { margin: 2rem 0; display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; }
     .nav-badges img { 
       height: 30px !important; border-radius: 6px; 
       filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
       transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
     }
     .nav-badges a:hover img { transform: scale(1.2) translateY(-5px); filter: brightness(1.2) drop-shadow(0 0 10px rgba(56, 189, 248, 0.6)); }

     /* --- 动画 --- */
     @keyframes typing { from { width: 0 } to { width: 100% } }
     @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: #38bdf8; } }
     @keyframes float-bot { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
     @keyframes pulse-antenna { 0% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0.6); } 70% { box-shadow: 0 0 0 8px rgba(56, 189, 248, 0); } 100% { box-shadow: 0 0 0 0 rgba(56, 189, 248, 0); } }
     @keyframes fadeUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
     @keyframes botEnter { from { opacity: 0; transform: translateX(-50%) translateY(20px); } to { opacity: 1; transform: translateX(-50%) translateY(0); } }

     @media screen and (max-width: 768px) { 
       .container { padding: 30px 20px; margin: 10px; }
       #bot-container { display: none; }
     }
   </style>
 </head>
 
 <body>
   <div class="cursor-dot"></div>
   <div class="cursor-outline"></div>
   <div id="progress-bar"></div>
   <div id="vanta-bg"></div>
 
   <div class="layout-wrapper">
     <div id="bot-container">
       <div class="bot-antenna"></div>
       <div class="bot-head">
         <div class="bot-eye"><div class="bot-pupil"></div><div class="bot-lid"></div></div>
         <div class="bot-eye"><div class="bot-pupil"></div><div class="bot-lid"></div></div>
       </div>
     </div>
 
     <div class="container">
       <section id="main_content">
         {{ content }}
       </section>
       <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(56, 189, 248, 0.2); text-align: center; color: #64748b; font-size: 0.8rem; letter-spacing: 2px;">
         <p>NEURAL_LINK // TERMINAL_EST_2026</p>
       </footer>
     </div>
   </div>
 
   <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>
   <script>
     // 赛博神经元网络配置
     let vantaEffect = VANTA.NET({
       el: "#vanta-bg",
       mouseControls: true,
       touchControls: true,
       gyroControls: false,
       minHeight: 200.00,
       minWidth: 200.00,
       scale: 1.00,
       scaleMobile: 1.00,
       color: 0x38bdf8,          // 电光蓝 (神经元色)
       backgroundColor: 0x020617, // 极夜黑
       points: 12.00,            // 神经元密度
       maxDistance: 20.00,       // 突触连接长度
       spacing: 16.00,
       showDots: true            // 显示神经核
     })
   </script>
   <script>
     document.addEventListener("DOMContentLoaded", function() {
       const cursorDot = document.querySelector('.cursor-dot');
       const cursorOutline = document.querySelector('.cursor-outline');
       const container = document.querySelector('.container');
       const pupils = document.querySelectorAll('.bot-pupil');
       const eyes = document.querySelectorAll('.bot-eye');
 
       window.addEventListener('mousemove', (e) => {
          const posX = e.clientX;
          const posY = e.clientY;
          cursorDot.style.left = `${posX}px`;
          cursorDot.style.top = `${posY}px`;
          cursorOutline.animate({ left: `${posX}px`, top: `${posY}px` }, { duration: 400, fill: "forwards" });
 
          // 容器 3D 偏转
          if (window.innerWidth > 768 && container) {
            const x = (window.innerWidth / 2 - posX) / 60;
            const y = (window.innerHeight / 2 - posY) / 60;
            container.style.transform = `rotateY(${x * -1}deg) rotateX(${y}deg)`;
          }

          // 机器人眼睛跟随
          pupils.forEach((pupil, index) => {
            const eye = eyes[index];
            const rect = eye.getBoundingClientRect();
            const angle = Math.atan2(e.clientY - (rect.top + rect.height/2), e.clientX - (rect.left + rect.width/2));
            const dist = Math.min(5, Math.hypot(e.clientX - (rect.left + rect.width/2), e.clientY - (rect.top + rect.height/2)) / 10);
            pupil.style.transform = `translate(calc(-50% + ${Math.cos(angle) * dist}px), calc(-50% + ${Math.sin(angle) * dist}px))`;
          });
       });
 
       // Badge 悬停逻辑：触发背景变红（警告色）和机器人变色
       const badgeLinks = document.querySelectorAll('.nav-badges a');
       badgeLinks.forEach(link => {
         link.addEventListener('mouseenter', () => {
           document.body.classList.add('badge-hovering', 'hovering');
           if(vantaEffect) vantaEffect.setOptions({ color: 0xf43f5e, points: 15.00 }); // 变红且密集
         });
         link.addEventListener('mouseleave', () => {
           document.body.classList.remove('badge-hovering', 'hovering');
           if(vantaEffect) vantaEffect.setOptions({ color: 0x38bdf8, points: 12.00 });
         });
       });

       // 滚动进度
       window.addEventListener('scroll', () => {
         const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
         document.getElementById("progress-bar").style.width = scrolled + "%";
       });
     });
   </script>
 </body>
</html>
